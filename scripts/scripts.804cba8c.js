"use strict";angular.module("mwgaApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngStorage"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("mwgaApp").controller("MainCtrl",["$scope","current","forecast","citycheck","$localStorage","invalidCity","weatherText",function(a,b,c,d,e,f,g){a.showCurrent=!1,a.showForecast=!1,a.showInvalidCity=!1,a.showNoQuery=!1,a.dataLoading=!1,a.showSearch=!0,a.invalidMessage="",a.weatherText=g,a.currHour=(new Date).getHours(),a.currHour>5&&a.currHour<17?a.currDayTime="day":a.currDayTime="night";var h=Date.now();if(e.cacheTimestamp){var i=new Date(e.cacheTimestamp),j=new Date(h),k=Math.round((j-i)/6e4);k>10?(console.log("Cache is expired. Refreshing."),a.current=b.query(),a.current.$promise.then(function(a){e.currentCache=a}),a.forecast=c.query(),a.forecast.$promise.then(function(a){e.forecastCache=a}),e.cacheTimestamp=h):(console.log("Cache is still fresh. Loading from local storage."),a.current=e.currentCache,a.forecast=e.forecastCache)}else console.log("Cache does not exist. Creating."),a.current=b.query(),a.current.$promise.then(function(a){e.currentCache=a}),a.forecast=c.query(),a.forecast.$promise.then(function(a){e.forecastCache=a}),e.cacheTimestamp=h;a.openCurrent=function(){a.dataLoading=!0,a.city?(a.showNoQuery=!1,a.cityCheck=d.query({location:a.city}),a.cityCheck.$promise.then(function(b){"US"===b.sys.country?(console.log("City is in the USA."),a.showSearch=!1,a.showForecast=!1,a.showCurrent=!0,a.showInvalidCity=!1):(a.showInvalidCity=!0,a.invalidMessage=f.getMessage(),console.log("City is invalid. Not in the USA. "+a.invalidMessage))})):a.showNoQuery=!0},a.openForecast=function(){a.showSearch=!1,a.showCurrent=!1,a.showForecast=!0,a.showInvalidCity=!1},a.openSearch=function(){a.showSearch=!0,a.showCurrent=!1,a.showForecast=!1,a.showInvalidCity=!1}}]),angular.module("mwgaApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("mwgaApp").factory("current",["$resource",function(a){return a("http://api.openweathermap.org/data/2.5/weather?id=:id&units=imperial&APPID=d9947bfbe4d5f42fa39c0d5e08ff915f",{},{query:{method:"GET",params:{id:"524901"},isArray:!1}})}]),angular.module("mwgaApp").factory("forecast",["$resource",function(a){return a("http://api.openweathermap.org/data/2.5/forecast/daily?id=:cityID&cnt=16&units=imperial&APPID=d9947bfbe4d5f42fa39c0d5e08ff915f",{},{query:{method:"GET",params:{cityID:"524901"},isArray:!1}})}]),angular.module("mwgaApp").factory("citycheck",["$resource",function(a){return a("http://api.openweathermap.org/data/2.5/weather?q=:location&units=imperial&APPID=d9947bfbe4d5f42fa39c0d5e08ff915f",{},{query:{method:"GET",params:{location:"Washington, DC"},isArray:!1}})}]),angular.module("mwgaApp").factory("invalidCity",function(){var a=["The weather there will never be great. Unless I move there and they elect me President.","They might have weather there. They might have bad weather. They might have good weather. Who knows?","The weather there is bad, bad, bad. Bad, dark clouds. Bad rain. Thunder. It could be good, but it isn't. We know that.","They could have good weather. But they don't send us their best weather. They send us cold, clouds, rain. Probably.","The weather there is not great. But it's better than the weather here sometimes! But we'll make the weather here so great that you will get sick of sunny days and moderate temps!","The weather there is great. I wish we could have such good weather. But that's how things are now. Sad.","They have the worst weather. I can't even imagine it. How bad could it be? Really bad.","They are not sending us their best weather. They send us clouds. They send us rain. Rain is good sometimes, but not usually."];return{getMessage:function(){return a[Math.floor(Math.random()*a.length)]}}}),angular.module("mwgaApp").factory("weatherText",function(){var a={thunderstorm:["It's going to rain very hard. It will be a little bit scary. A little bit noisy. But we will do OK."],lightning:["There will be lightning. Which is electricity. I know all about it because my grandfather was an electrician back in World War II and he told me everything."],sprinkle:["There will be small showers. Sprinkles. It will sprinkle, but only a small amount."],rain:["It's going to be wet. Rainy. The rain will fall. Be careful out there."],rainMix:["It will be rain, but not just rain. Rain and something else. Rain plus something extraordinary. Because it is America, and that's who we do."],showers:["There will be showers. It will shower us with wealth. Showers of gold. Golden showers. For all of us. So wonderful."],stormShowers:["There will be showers, but there will also be storms. We will enjoy the showers. But we will not enjoy the loud storms."],snow:["Snow will fall and it will be white and pure. So beautiful."],sleet:["Nobody likes sleet. But we must live with it because this is the system we have. For now."],smoke:["It will be smokey. I remember smoking Cuban cigars rolled by seven-year-old girls in 1984 with Fidel Castro. What a guy, that Fidel. A leader!"],dayHaze:["Today will be hazey. Nobody will really know what's out there. But do any of us really know? What is out there? Who knows? Maybe someday we will. But not now. Let's figure that out."],dust:["The dust will be terrible today. Just horrible. Bad hombre dust that will make you have to use that nose thing."],fog:["It's foggy out there. Can't see a thing. Terrible for golf."],cloudyGusts:["The clouds are out and the wind is blowing hard. Might be a good day for a hat. I sell those. Best hats ever made. Made in America. From REAL cotton."],tornado:["A tornado may happen. Or it may be happening. I'm not sure. I don't pay attention to that sort of thing. Good luck."],daySunny:["It's a lovely, sunny day. I'd go golfing, but I have too much work to do. Well, maybe in the afternoon. We'll see."],cloudy:["The clouds are out, but it's OK: There is no rain in the forecast. We will be OK, and we will make it."],hurricane:["A hurricane might be happening. Or maybe not. I would tell you to check with the weather guys, but I think I cut that budget. Good luck!"],hot:["It's going to be hot. Really hot. No good for working, but it's a great day to take out the yacht. Oh, and the ladies on these hot days. Let me tell you: They wear, like, almost NOTHING!"],windy:["Wind is blowing around everywhere. Be careful out there. Might want to buy a MAGA hat. #MAGA"],hail:["There is hail. It might be the size of a pea. It might be more like a golf ball. Nobody knows. But we're going to find out."]},b=function(b){var c="The weather there is going to be very unknown. Unknowable even. Who really knows? Nobody. But we're gonna figure it out.";return[232,231,202,201,200].indexOf(b)>=0?c=a.thunderstorm[Math.floor(Math.random()*a.thunderstorm.length)]:[221,212,211,210].indexOf(b)>=0?c=a.lightning[Math.floor(Math.random()*a.lightning.length)]:[500,321,301,300].indexOf(b)>=0?c=a.sprinkle[Math.floor(Math.random()*a.sprinkle.length)]:[500,321,301,300].indexOf(b)>=0?c=a.rain[Math.floor(Math.random()*a.rain.length)]:[620,616,615,612,611,511,310].indexOf(b)>=0?c=a.rainMix[Math.floor(Math.random()*a.rainMix.length)]:[701,522,521,520,313].indexOf(b)>=0?c=a.showers[Math.floor(Math.random()*a.showers.length)]:[901,521].indexOf(b)>=0?c=a.stormShowers[Math.floor(Math.random()*a.stormShowers.length)]:[903,622,621,601,600].indexOf(b)>=0?c=a.snow[Math.floor(Math.random()*a.snow.length)]:[602].indexOf(b)>=0?c=a.sleet[Math.floor(Math.random()*a.sleet.length)]:[711].indexOf(b)>=0?c=a.smoke[Math.floor(Math.random()*a.smoke.length)]:[711].indexOf(b)>=0?c=a.dayHaze[Math.floor(Math.random()*a.dayHaze.length)]:[762,761,731].indexOf(b)>=0?c=a.dust[Math.floor(Math.random()*a.dust.length)]:[741].indexOf(b)>=0?c=a.fog[Math.floor(Math.random()*a.fog.length)]:[801,802,803,771].indexOf(b)>=0?c=a.cloudyGusts[Math.floor(Math.random()*a.cloudyGusts.length)]:[900,781].indexOf(b)>=0?c=a.tornado[Math.floor(Math.random()*a.tornado.length)]:[800].indexOf(b)>=0?c=a.daySunny[Math.floor(Math.random()*a.daySunny.length)]:[804].indexOf(b)>=0?c=a.cloudy[Math.floor(Math.random()*a.cloudy.length)]:[902].indexOf(b)>=0?c=a.hurricane[Math.floor(Math.random()*a.hurricane.length)]:[904].indexOf(b)>=0?c=a.hot[Math.floor(Math.random()*a.hot.length)]:[957,905].indexOf(b)>=0?c=a.windy[Math.floor(Math.random()*a.windy.length)]:[906].indexOf(b)>=0&&(c=a.hail[Math.floor(Math.random()*a.hail.length)]),c};return{getWeatherDescription:function(a){return b(a)}}}),angular.module("mwgaApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="search" ng-show="showSearch"> <p class="form"><input type="text" ng-model="city" placeholder="Enter city name."> <button ng-click="openCurrent()" class="btn btn-large btn-primary">Get REAL Weather!</button></p> <p>(American cities only, please.)</p> </div> <div class="current" ng-show="showCurrent"> <h2>The REAL Weather for: {{city | uppercase}}</h2> <dl> <dt>Currently</dt> <dd><i class="wi wi-owm-{{currDayTime}}-{{current.weather[0].id}}"></i></dd> <dd>{{current.weather[0].main}}</dd> <dd>{{weatherText.getWeatherDescription(current.weather[0].id)}}</dd> <dt>Temperature</dt> <dd>{{current.main.temp}}</dd> <dt>Wind</dt> <dd>{{current.wind.speed}} mph at {{current.wind.deg}} degrees</dd> <dt>Clouds</dt> <dd>{{current.clouds.all}}%</dd> </dl> <p><button ng-click="openForecast()" class="btn btn-block btn-primary">View Full REAL Forecast</button></p> </div> <div class="forecast" ng-show="showForecast"> <h2>The REAL Forecast for: {{city | uppercase}}</h2> <dl ng-repeat="prediction in forecast.list" class="weather-forecast"> <dt>Forecast for {{prediction.dt*1000 | date:\'MMM dd, yyyy\'}}</dt> <dd><i class="wi wi-owm-{{currDayTime}}-{{prediction.weather[0].id}}"></i></dd> <dd>{{prediction.weather[0].main}}</dd> <dd>{{weatherText.getWeatherDescription(prediction.weather[0].id)}}</dd> <dt>Temperature</dt> <dd>Min: {{prediction.temp.min}} &deg;F Max: {{prediction.temp.max}} &deg;F</dd> </dl> <p><button ng-click="openForecast()" class="btn btn-block btn-primary">View Current REAL Weather</button></p> </div> <div class="invalid-city" ng-show="showInvalidCity"> <h2>{{ city | uppercase }} is Not in the USA!</h2> <p class="lead">{{ invalidMessage }}</p> <p>Please search for another city.</p> </div> <div class="no-query" ng-show="showNoQuery"> <h2>Missing City Name. Sad!</h2> <p class="lead">You must enter the name of an American city to find weather information.</p> </div> <p ng-show="!showSearch"><button class="btn btn-block btn-primary" ng-click="openSearch()">Get REAL Weather Information for Another City</button></p>')}]);