"use strict";angular.module("mwgaApp",["720kb.socialshare","ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngStorage"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("mwgaApp").controller("MainCtrl",["$scope","current","forecast","citycheck","$localStorage","invalidCity","weatherText",function(a,b,c,d,e,f,g){a.showCurrent=!1,a.showForecast=!1,a.showInvalidCity=!1,a.showNoQuery=!1,a.dataLoading=!1,a.showSearch=!0,a.invalidMessage="",a.weatherText=g,console.log("Загружаются данные"),a.currHour=(new Date).getHours(),a.currHour>5&&a.currHour<17?a.currDayTime="day":a.currDayTime="night";var h=Date.now();if(e.cacheTimestamp){var i=new Date(e.cacheTimestamp),j=new Date(h),k=Math.round((j-i)/6e4);k>10?(a.current=b.query(),a.current.$promise.then(function(a){e.currentCache=a}),a.forecast=c.query(),a.forecast.$promise.then(function(a){e.forecastCache=a}),e.cacheTimestamp=h,console.log("Данные получены")):(a.current=e.currentCache,a.forecast=e.forecastCache,console.log("Данные загружены"))}else a.current=b.query(),a.current.$promise.then(function(a){e.currentCache=a}),a.forecast=c.query(),a.forecast.$promise.then(function(a){e.forecastCache=a}),e.cacheTimestamp=h,console.log("Данные загружены");a.openCurrent=function(){a.dataLoading=!0,console.log("Загружаются данные"),a.city?(a.showNoQuery=!1,a.cityCheck=d.query({location:a.city}),a.cityCheck.$promise.then(function(b){console.log("Данные загружены"),"US"===b.sys.country?(a.showSearch=!1,a.showForecast=!1,a.showCurrent=!0,a.showInvalidCity=!1):(a.badCity=b.name,a.showInvalidCity=!0,a.invalidMessage=f.getMessage())})):a.showNoQuery=!0},a.openForecast=function(){a.showSearch=!1,a.showCurrent=!1,a.showForecast=!0,a.showInvalidCity=!1},a.openSearch=function(){a.showSearch=!0,a.showCurrent=!1,a.showForecast=!1,a.showInvalidCity=!1}}]),angular.module("mwgaApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("mwgaApp").factory("current",["$resource","weatherText",function(a,b){return a("http://api.openweathermap.org/data/2.5/weather?id=:id&units=imperial&APPID=d9947bfbe4d5f42fa39c0d5e08ff915f",{},{query:{method:"GET",params:{id:"524901"},isArray:!1,transformResponse:function(a,c){var d=angular.fromJson(a);return d.weather[0].description=b.getWeatherDescription(d.weather[0].id),800===d.weather[0].id&&d.wind.speed<15&&d.main.temp>58?(d.golf=!0,console.log("Good weather for golf.")):(console.log("Bad weather for golf."),d.golf=!1),d}}})}]),angular.module("mwgaApp").factory("forecast",["$resource","weatherText",function(a,b){return a("http://api.openweathermap.org/data/2.5/forecast/daily?id=:cityID&cnt=16&units=imperial&APPID=d9947bfbe4d5f42fa39c0d5e08ff915f",{},{query:{method:"GET",params:{cityID:"524901"},isArray:!1,transformResponse:function(a,c){for(var d=angular.fromJson(a),e=0;e<d.list.length;e++)d.list[e].weather[0].description=b.getWeatherDescription(d.list[e].weather[0].id),800===d.list[e].weather[0].id&&d.list[e].speed<15&&d.list[e].temp.max>58?d.list[e].weather[0].golf=!0:d.list[e].weather[0].golf=!1;return d}}})}]),angular.module("mwgaApp").factory("citycheck",["$resource",function(a){return a("http://api.openweathermap.org/data/2.5/weather?q=:location&units=imperial&APPID=d9947bfbe4d5f42fa39c0d5e08ff915f",{},{query:{method:"GET",params:{location:"Washington, DC"},isArray:!1}})}]),angular.module("mwgaApp").factory("invalidCity",function(){var a=["The weather there will never be great. Unless I move there and they elect me President.","They might have weather there. They might have bad weather. They might have good weather. Who knows?","The weather there is bad, bad, bad. Bad, dark clouds. Bad rain. Thunder. It could be good, but it isn't. We know that.","They could have good weather. But they don't send us their best weather. They send us cold, clouds, rain. Probably.","The weather there is not great. But it's better than the weather here sometimes! But we'll make the weather here so great that you will get sick of sunny days and moderate temps!","The weather there is great. I wish we could have such good weather. But that's how things are now. Sad.","They have the worst weather. I can't even imagine it. How bad could it be? Really bad.","They are not sending us their best weather. They send us clouds. They send us rain. Rain is good sometimes, but not usually."];return{getMessage:function(){return a[Math.floor(Math.random()*a.length)]}}}),angular.module("mwgaApp").factory("weatherText",function(){var a={thunderstorm:["It's going to rain very hard. It will be a little bit scary. A little bit noisy. But we will do OK.","If Obama had done his job, we wouldn't have this thunderstorm to worry about. But here we are.","We will use the full force of the American military to fight this thunderstorm.","I will present a plan in 30 days for eliminating this thunderstorm once and for all.","There was a thunderstorm on Inauguration Day until God parted the clouds to let me speak. I was beautiful. And my words were the best.","I have stopped more thunderstorms during my administration than any other US President. Only Mussolini ranked higher than me!"],lightning:["There will be lightning. Which is electricity. I know all about it because my grandfather was an electrician back in World War II and he told me everything.","Electricity is very powerful stuff. It's hot. And tingly. I know, because I have a very good brain.","The lightning strikes like we will strike North Korea (or Venezuala, or Iran, or Syria, etc.): With Fire and Fury!","Fire and fury!"],sprinkle:["There will be small showers. Sprinkles. It will sprinkle, but only a small amount.","The rain will be so hard today because the Democrats continue to refuse to work with me.","Unlike my own strong hands, these sprinkles will be very small rain showers.","On Inauguration Day a light sprinkle turned into a raging storm until I began to speak."],rain:["It's going to be wet. Rainy. The rain will fall. Be careful out there.","It's not going to rain. The main stream media says it will, but it won't. Trust me. I know.","If it DOES rain today, it's because the Democrats failed to work with us on healthcare.","Maybe if Obama had been more like Putin then we wouldn't have all this rain now.","It's definitely not raining today, no matter what the main stream media wants us to believe."],rainMix:["It will be rain, but not just rain. Rain and something else. Rain plus something extraordinary. Because it is America, and that's who we do.","It might be rainy. It might not. Depends on which side you believe. There are many sides to this issues. We will figure it out.","This great military of ours is so great. This rain will not keep them from winning!","The rain is really terrible. A new low for Mother Nature. She's just a nasty woman. She rains out of her sky, she rains out of her wherever.","Inauguration Day was a mix of rain and lies from the main stream media about the largest crowd ever assembled."],showers:["There will be showers. It will shower us with wealth. Showers of gold. Golden showers. For all of us. So wonderful.","The main stream media is continuing to promote the LIE that there will be showers today. Do not believe it. There will be no showers.","Unlike my hands, which are beautiful and larger than normal, showers are smaller than rain.","Showers are coming, they say. The showers will get us all damp, they say. Well, who do they think they are? We won't have showers. We will have sunshine!","These showers will be stronger than Hillary Clinton's tears after she realized I won the popular election."],stormShowers:["There will be showers, but there will also be storms. We will enjoy the showers. But we will not enjoy the loud storms.","There will be thunderstorms. And there will be showers. There will be some of both. This is an issue with many sides.","With the rain, and the wind, and the thunder and lightning. It's like Vietnam out there. Except worse.","These showers will rain down like the tears from my many, many enemies. Happy Mother's Day."],snow:["Snow will fall and it will be white and pure. So beautiful.","As my father taught me: Snow is cold. So we don't want that. Let's take care of it.","I love snow, so beautiful and white. Some people don't. But some people know what I mean. I love whites.","The snow is just gorgeous. Big, big drifts remind me of, well, you know. The things we like best about women. Right?","It's cold. It's frigid. It's not a good day for us. This is what happens when we don't put America First."],sleet:["Nobody likes sleet. But we must live with it because this is the system we have. For now.","Is it ice? Or is it rain? Is it very wet snow? There are many sides to this issue. It's a bad time for America.","It's wet. It's cold. It's icy. No more questions.","Today will be beautiful beyond belief."],smoke:["It will be smokey. I remember smoking Cuban cigars rolled by seven-year-old girls in 1984 with Fidel Castro. What a guy, that Fidel. A leader!","You know what they say: Where there's smoke there's fire. I don't know who made that up, but I know they were one of our greatest patriots. It was my grandfather.","Covfefe."],dayHaze:["Today will be hazy. Nobody will really know what's out there. But do any of us really know? What is out there? Who knows? Maybe someday we will. But not now. Let's figure that out.","The main stream media wants you to believe it will be hazy today. But that is just what it looks like when we put America first!","Covfefe."],dust:["The dust will be terrible today. Just horrible. Bad hombre dust that will make you have to use that nose thing.","Why worry about a little dust? I'm a very intelligent guy, and I'm not bothered by dust. We won't let them keep telling us to be worried about dust!","Covfefe."],fog:["It's foggy out there. Can't see a thing. Terrible for golf.","Some people like fog. And I respect fog. But I like sunshine better.","It's so foggy that the main stream media couldn't even see the full size of the audience at my rally. Biggest audience yet."],cloudyGusts:["The clouds are out and the wind is blowing hard. Might be a good day for a hat. I sell those. Best hats ever made. Made in America. From REAL cotton.","We have problems with sunshine and cloudiness on both sides. This is bad for our country.","We have the clouds. We have the wind. What else? Who really knows?"],tornado:["A tornado may happen. Or it may be happening. I'm not sure. I don't pay attention to that sort of thing. Good luck.","The main stream media will tell you to take shelter from this tornado, but that's FAKE NEWS. It will be windy, but we will make it.","If this tornado keeps threatening the area, it will feel the full fire and fury of the US military.","Covfefe.","I have stopped more tornadoes during my administration than any other US President. Only Putin ranks higher than me!"],daySunny:["It's a lovely, sunny day. I'd go golfing, but I have too much work to do. Well, maybe in the afternoon. We'll see.","It's a great day for a round of golf at one of my many lovely golf courses. We have the best greens. They are the best.","Let me tell you, folks, you're going to get sick and tired of all this sunshine.","This is what it looks like when we put America First!","It's sunny. Let's take the boat out. I have a friend who bought a boat after he sold his company and made a lot of money. He did things on that boat, well, I won't repeat. But you can imagine. You're a person of the world.","Good sun. Very warm. Good genes.","This is the kind of day when we can make a lot of money. I mean a lot of money. Like, lots. You won't believe it.","It's warm. Too warm? Or not warm enough? There are many sides to this issue."],cloudy:["The clouds are out, but it's OK: There is no rain in the forecast. We will be OK, and we will make it.","It could be cloudy. It could be sunny. It could be something else. Who knows?","Some people like clouds. Some people do not. At least we can agree: we all hate rain.","Clouds are like Democrats coming to ruin an otherwise great healthcare bill. The greatest. Sad.","The clouds are bad, people. They bring rain. They bring bad air. They are bad hombres."],hurricane:["A hurricane might be happening. Or maybe not. I would tell you to check with the weather guys, but I think I cut that budget. Good luck!","Hurricanes are a story made up by the Chinese to get back at our great country for our success. Hillary would tell you to take cover from it, but I know those things and they're not that bad. Very big. Very windy. But not that bad.","Sad!","I have stopped more hurricanes during my administration than any other US President. Only Pol Pot ranked higher than me!"],hot:["It's going to be hot. Really hot. No good for working, but it's a great day to take out the yacht. Oh, and the ladies on these hot days. Let me tell you: They wear, like, almost NOTHING!","How did it get so hot? Was it Russia? They say it was. Maybe. But maybe not.","You know who is good at dealing with heat like this? The Iranians."],windy:["Wind is blowing around everywhere. Be careful out there. Might want to buy a MAGA hat. #MAGA","Sure, it's windy. But look at us: Are we so innocent?","Not a good day for golfing."],hail:["There is hail. It might be the size of a pea. It might be more like a golf ball. Nobody knows. But we're going to find out.","Once a hail stone broke the window of my limo. I had to use a different limo for, like, two weeks. It was my personal Vietnam.","A terrible day for golf. And America.","I have stopped more hail during my administration than any other US President. Only Mussolini ranked higher than me!"]},b=[],c=function(c){for(var d="The weather there is going to be very unknown. Unknowable even. Who really knows? Nobody. But we're gonna figure it out.",e=0,f=!1,g=0;!f;)[232,231,202,201,200].indexOf(c)>=0?(g=a.thunderstorm.length,d=a.thunderstorm[Math.floor(Math.random()*a.thunderstorm.length)]):[221,212,211,210].indexOf(c)>=0?(g=a.lightning.length,d=a.lightning[Math.floor(Math.random()*a.lightning.length)]):[500,321,301,300].indexOf(c)>=0?(g=a.sprinkle.length,d=a.sprinkle[Math.floor(Math.random()*a.sprinkle.length)]):[500,321,301,300].indexOf(c)>=0?(g=a.rain.length,d=a.rain[Math.floor(Math.random()*a.rain.length)]):[620,616,615,612,611,511,310].indexOf(c)>=0?(g=a.rainMix.length,d=a.rainMix[Math.floor(Math.random()*a.rainMix.length)]):[701,522,521,520,313].indexOf(c)>=0?(g=a.showers.length,d=a.showers[Math.floor(Math.random()*a.showers.length)]):[901,521].indexOf(c)>=0?(g=a.stormShowers.length,d=a.stormShowers[Math.floor(Math.random()*a.stormShowers.length)]):[903,622,621,601,600].indexOf(c)>=0?(g=a.snow.length,d=a.snow[Math.floor(Math.random()*a.snow.length)]):[602].indexOf(c)>=0?(g=a.sleet.length,d=a.sleet[Math.floor(Math.random()*a.sleet.length)]):[711].indexOf(c)>=0?(g=a.smoke.length,d=a.smoke[Math.floor(Math.random()*a.smoke.length)]):[711].indexOf(c)>=0?(g=a.dayHaze.length,d=a.dayHaze[Math.floor(Math.random()*a.dayHaze.length)]):[762,761,731].indexOf(c)>=0?(g=a.dust.length,d=a.dust[Math.floor(Math.random()*a.dust.length)]):[741].indexOf(c)>=0?(g=a.fog.length,d=a.fog[Math.floor(Math.random()*a.fog.length)]):[801,802,803,771].indexOf(c)>=0?(g=a.cloudyGusts.length,d=a.cloudyGusts[Math.floor(Math.random()*a.cloudyGusts.length)]):[900,781].indexOf(c)>=0?(g=a.tornado.length,d=a.tornado[Math.floor(Math.random()*a.tornado.length)]):[800].indexOf(c)>=0?(g=a.daySunny.length,d=a.daySunny[Math.floor(Math.random()*a.daySunny.length)]):[804].indexOf(c)>=0?(g=a.cloudy.length,d=a.cloudy[Math.floor(Math.random()*a.cloudy.length)]):[902].indexOf(c)>=0?(g=a.hurricane.length,d=a.hurricane[Math.floor(Math.random()*a.hurricane.length)]):[904].indexOf(c)>=0?(g=a.hot.length,d=a.hot[Math.floor(Math.random()*a.hot.length)]):[957,905].indexOf(c)>=0?(g=a.windy.length,d=a.windy[Math.floor(Math.random()*a.windy.length)]):[906].indexOf(c)>=0?(g=a.hail.length,d=a.hail[Math.floor(Math.random()*a.hail.length)]):f=!0,-1===b.indexOf(d)?(b.push(d),f=!0):g>e?e++:f=!0;return d};return{getWeatherDescription:function(a){return c(a)}}}),angular.module("mwgaApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="search" ng-show="showSearch"> <form ng-submit="openCurrent()"><input type="text" ng-model="city" placeholder="Enter city name."> <button ng-click="openCurrent()" class="btn btn-large btn-primary">Get REAL Weather!</button></form> <p>(American cities only, please.)</p> </div> <div class="current" ng-show="showCurrent"> <p class="weather-icon"><i class="wi wi-owm-{{currDayTime}}-{{current.weather[0].id}}"></i></p> <h2>In {{city | uppercase}} it is currently...</h2> <p class="weather-summary">{{current.weather[0].main}}</p> <p class="weather-description">{{current.weather[0].description}}</p> <p class="weather-curr-temp"><b>Current Temp</b> {{current.main.temp}} &deg;F</p> <p class="weather-wind-speed"><b>Wind</b> {{current.wind.speed}} mph at {{current.wind.deg}} degrees</p> <p class="weather-golf" ng-show="current.golf">It\'s a great day to play golf! <i class="fa fa-thumbs-up"></i></p> <p class="forecast-button-holder"><button ng-click="openForecast()" class="btn btn-block btn-primary">View Full Forecast</button></p> <ul class="socialshare"> <li class="share-text"> Tweet the Great Weather: </li> <li> <a class="share-button twitter" socialshare socialshare-provider="twitter" socialshare-text="{{current.weather[0].description | limitTo:85}}{{current.weather[0].description.length > 85 ? \'...\' : \'\'}}" socialshare-hashtags="MWGA" socialshare-url="http://maketheweathergreatagain.com"> <i class="fa fa-twitter"></i> </a> </li> </ul> </div> <div class="forecast" ng-show="showForecast"> <h2>The 12-day Forecast for: {{city | uppercase}}</h2> <ul id="forecast-list"> <li ng-repeat="prediction in forecast.list | limitTo: 12" class="weather-forecast"> <div class="forecast-content"> <p class="forecast-date">{{prediction.dt*1000 | date:\'MMM dd, yyyy\'}}</p> <p class="forecast-temps"><b>Low</b> {{prediction.temp.min}} &deg;F <b>High</b> {{prediction.temp.max}} &deg;F</p> <p class="forecast-summary">{{prediction.weather[0].main}}</p> <p class="forecast-icon"><i class="wi wi-owm-{{currDayTime}}-{{prediction.weather[0].id}}"></i></p> <p class="forecast-description">{{prediction.weather[0].description}}</p> <p class="forecast-golf" ng-show="{{prediction.weather[0].golf}}">Golfing! <i class="fa fa-thumbs-up"></i></p> </div> </li> </ul> <p><button ng-click="openCurrent()" class="btn btn-block btn-primary">Back to Current Conditions</button></p> </div> <div class="invalid-city" ng-show="showInvalidCity"> <h2>{{ badCity | uppercase }} is Not in the USA!</h2> <p class="lead">{{ invalidMessage }}</p> <p>Please search for another city.</p> </div> <div class="no-query" ng-show="showNoQuery"> <h2>Missing City Name. Sad!</h2> <p class="lead">You must enter the name of an American city to find weather information.</p> </div> <p ng-show="!showSearch"><a class="new-search" ng-click="openSearch()"><i class="wi wi-cloud-refresh"></i> View Weather Conditions for Another City</a></p>')}]);